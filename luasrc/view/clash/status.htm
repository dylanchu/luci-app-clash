<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="x-dns-prefetch-control" content="on">
	<link rel="dns-prefetch" href="//cdn.jsdelivr.net">
	<meta name="referrer" content="no-referrer">
	<link rel="preconnect" href="https://geoip.gbxcloud.com">
	<link rel="preconnect" href="https://myip.ipip.net">
	<link rel="preconnect" href="https://api.ip.sb/geoip/">
	<link rel="preconnect" href="https://ip4.seeip.org/json">
</head>

</html>
<style>
	.pure-g {
		letter-spacing: -.31em;
		text-rendering: optimizespeed;
		font-family: FreeSans, Arimo, "Droid Sans", Helvetica, Arial, sans-serif;
		display: -webkit-box;
		display: -webkit-flex;
		display: -ms-flexbox;
		display: flex;
		-webkit-box-orient: horizontal;
		-webkit-box-direction: normal;
		-webkit-flex-flow: row wrap;
		-ms-flex-flow: row wrap;
		flex-flow: row wrap;
		-webkit-align-content: flex-start;
		-ms-flex-line-pack: start;
		align-content: flex-start
	}

	@media all and (-ms-high-contrast:none),
	(-ms-high-contrast:active) {
		table .pure-g {
			display: block
		}
	}

	.opera-only :-o-prefocus,
	.pure-g {
		word-spacing: -.43em
	}

	.pure-u {
		display: inline-block;
		zoom: 1;
		letter-spacing: normal;
		word-spacing: normal;
		vertical-align: top;
		text-rendering: auto
	}

	.pure-g [class*=pure-u] {
		font-family: sans-serif
	}

	.pure-u-1,
	.pure-u-1-1,
	.pure-u-1-12,
	.pure-u-1-2,
	.pure-u-1-24,
	.pure-u-1-3,
	.pure-u-1-4,
	.pure-u-1-5,
	.pure-u-1-6,
	.pure-u-1-8,
	.pure-u-10-24,
	.pure-u-11-12,
	.pure-u-11-24,
	.pure-u-12-24,
	.pure-u-13-24,
	.pure-u-14-24,
	.pure-u-15-24,
	.pure-u-16-24,
	.pure-u-17-24,
	.pure-u-18-24,
	.pure-u-19-24,
	.pure-u-2-24,
	.pure-u-2-3,
	.pure-u-2-5,
	.pure-u-20-24,
	.pure-u-21-24,
	.pure-u-22-24,
	.pure-u-23-24,
	.pure-u-24-24,
	.pure-u-3-24,
	.pure-u-3-4,
	.pure-u-3-5,
	.pure-u-3-8,
	.pure-u-4-24,
	.pure-u-4-5,
	.pure-u-5-12,
	.pure-u-5-24,
	.pure-u-5-5,
	.pure-u-5-6,
	.pure-u-5-8,
	.pure-u-6-24,
	.pure-u-7-12,
	.pure-u-7-24,
	.pure-u-7-8,
	.pure-u-8-24,
	.pure-u-9-24 {
		display: inline-block;
		zoom: 1;
		letter-spacing: normal;
		word-spacing: normal;
		vertical-align: top;
		text-rendering: auto
	}

	.pure-u-1-24 {
		width: 4.1667%
	}

	.pure-u-1-12,
	.pure-u-2-24 {
		width: 8.3333%
	}

	.pure-u-1-8,
	.pure-u-3-24 {
		width: 12.5%
	}

	.pure-u-1-6,
	.pure-u-4-24 {
		width: 16.6667%
	}

	.pure-u-1-5 {
		width: 20%
	}

	.pure-u-5-24 {
		width: 20.8333%
	}

	.pure-u-1-4,
	.pure-u-6-24 {
		width: 25%
	}

	.pure-u-7-24 {
		width: 29.1667%
	}

	.pure-u-1-3,
	.pure-u-8-24 {
		width: 33.3333%
	}

	.pure-u-3-8,
	.pure-u-9-24 {
		width: 37.5%
	}

	.pure-u-2-5 {
		width: 40%
	}

	.pure-u-10-24,
	.pure-u-5-12 {
		width: 41.6667%
	}

	.pure-u-11-24 {
		width: 45.8333%
	}

	.pure-u-1-2,
	.pure-u-12-24 {
		width: 50%
	}

	.pure-u-13-24 {
		width: 54.1667%
	}

	.pure-u-14-24,
	.pure-u-7-12 {
		width: 58.3333%
	}

	.pure-u-3-5 {
		width: 60%
	}

	.pure-u-15-24,
	.pure-u-5-8 {
		width: 62.5%
	}

	.pure-u-16-24,
	.pure-u-2-3 {
		width: 66.6667%
	}

	.pure-u-17-24 {
		width: 70.8333%
	}

	.pure-u-18-24,
	.pure-u-3-4 {
		width: 75%
	}

	.pure-u-19-24 {
		width: 79.1667%
	}

	.pure-u-4-5 {
		width: 80%
	}

	.pure-u-20-24,
	.pure-u-5-6 {
		width: 83.3333%
	}

	.pure-u-21-24,
	.pure-u-7-8 {
		width: 87.5%
	}

	.pure-u-11-12,
	.pure-u-22-24 {
		width: 91.6667%
	}

	.pure-u-23-24 {
		width: 95.8333%
	}

	.pure-u-1,
	.pure-u-1-1,
	.pure-u-24-24,
	.pure-u-5-5 {
		width: 100%
	}

	.block {
		margin: 0.5rem;
		padding: 0;
		font-weight: normal;
		font-style: normal;
		line-height: 1;
		font-family: inherit;
		min-width: inherit;
		overflow-x: auto;
		overflow-y: hidden;
		border: 1px solid rgba(0, 0, 0, .05);
		border-radius: .375rem;
		background-color: #fff;
		box-shadow: 0 0 2rem 0 rgba(136, 152, 170, .15);
	}

	.img-con {
		margin: 1rem;
		margin-left: -20px;

	}

	.green {
		font-size: .9rem;
		color: #2dce89;
	}

	.red {
		font-size: .9rem;
		color: #fb6340;
	}

	.yellow {
		font-size: .9rem;
		color: #fb9a05;
	}

	.block img {
		width: 48px;
		height: auto;
		float: right;
	}

	.pure-u-5-8 {
		display: flex;
		align-items: center;
	}

	.block h4 {
		font-size: .8125rem;
		font-weight: 600;
		margin: 1rem;
		color: #8898aa !important;
		line-height: 1.8em;
		min-height: 48px;
	}

	.check {
		cursor: pointer;
	}

	@media screen and (max-width: 720px) {
		.block {
			margin: 0.2rem;
		}

		.pure-u-1-4 {
			width: 50%;
		}

		.pure-u-1-2 {
			width: 100%;
		}


	}

	@media screen and (max-width: 480px) {
		.img-con {
			margin: 1.5rem 0.5rem;
		}

		.block img {
			width: 36px;
		}

	}

	@media only screen and (max-width: 600px) {
		.siz {
			width: 100%;
		}
	}

	@media only screen and (min-width: 768px) {
		.siz {
			width: 50%;
		}
	}

	@media only screen and (min-width: 600px) {
		.siz {
			width: 50%;
		}
	}

	@media only screen and (max-width: 480px) {
		.siz {
			width: 100%;
		}
	}
</style>


<fieldset class="cbi-section">
	<p width="100%" align="center">
		<font color="blue"><b id="_realtimelog">Clash for OpenWRT</b></font>
	</p>
	<p width="100%" align="center">
		<%:Rule-based Custom Proxy Client%>
	</p>
	<p width="100%" align="center" id="_downloadnew"></p>
</fieldset>


<fieldset class="cbi-section">
	<div class="pure-g status">
		<div class="pure-u-1-4 ">
			<div class="block pure-g">
				<div class="pure-u-8-24">
					<div class="img-con">
						<img src="data:image/png;base64,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"
							alt="baidu" style="max-width:90%; max-height:128px;" />
					</div>
				</div>
				<div class="pure-u-16-24">
					<h4>
						<%:Baidu%><br><br><span id="status_baidu" class="red"><em><%:Collecting data...%></em></span>
					</h4>
				</div>
			</div>
		</div>


		<div class="pure-u-1-4 ">
			<div class="block pure-g">
				<div class="pure-u-8-24">
					<div class="img-con">
						<img src="data:image/png;base64,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"
							alt="google" style="max-width:90%; max-height:128px;" />
					</div>
				</div>
				<div class="pure-u-16-24">
					<h4>
						<%:Google%><br><br><span id="status_google" class="red"><em><%:Collecting data...%></em></span>
					</h4>
				</div>
			</div>
		</div>

		<div class="pure-u-1-4 ">
			<div class="block pure-g">
				<div class="pure-u-8-24">
					<div class="img-con">
						<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAepJREFUaEPtmb8vBEEUxz8TiYhfERFCdAoFhUR0IioS0UgoxP0DEtFqCEJNhCg1zl9ARE9JRa9Aq3Eazcqzs6yNu2Rvn7nMZS/Z3K+d7/d95u3OvJk1eP4ynsdPDlDrDOYZyDOQsQfq7xIKoAuYAPqAbqC1zNGS+L0xZWd+AKXY8Z74Hv/vCXgxcJn0+JWBABaAHWAwZTCuTr8Djg2cRIbfAAFsAZuuIsnos23CeMOJLIBZ4DyjqOvmYwZuI4AisOQ6gox+ZwYKJoB24BHozCjouvkrMCAA08CVa3clvzkBkFFnXUnQtcyuABwCK66dlfyOBOAUKCgJupYpCoAMnzKMar2mCCeafi3BCjoXAnANjGuZmZ+5ZRU40NIto3MjAPfAsJZRBGAnyCZgD1jW0k/oPAiAFEpq6Y4DRGYBjAD7wKQyyLMAvNmqUkX7L4AYyKIF6VExg5IABEpiXzKVAOxl1WCLxg0NX+cAsWwMEVaU81lAcoBk79XiEvL+JvZ+GPV+IvO+lPC+mPO+nPZ+QeP9ktL7Rb3f2yq2QvR3Y8sC+L21aCH83dyN1eiyvb4GjGap0f+xbfnt9bhpADNALyBLvw6gzR5yw8vn5HtzFUHrP+CoIoiaN6m/Z2Q179KUAeQZSNlh6qd7n4FPZYeQhTTr+iwAAAAASUVORK5CYII="
							alt="youtube" style="max-width:90%; max-height:128px;" />
					</div>
				</div>
				<div class="pure-u-16-24">
					<h4>
						<%:Youtube%><br><br><span id="status_youtube" class="red"><em><%:Collecting data...%></em></span>
					</h4>
				</div>
			</div>
		</div>

		<div class="pure-u-1-4">
			<div class="block pure-g">
				<div class="pure-u-8-24">
					<div class="img-con">
						<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABKhJREFUaEPNmWcIHFUQx3/5IBaIBQuJxt4FRbFiAcWGDRFULNiNChYQFQu22LF8UfPBAjawF0IsKIoBI2pUVBRLbBGNigXbBysov/D2WNbdfbN3e6cDyy130/7vvZk3MzeFfmlpYA1g9fTpu7Q4PV+mz9/7MjulB0VrAnsBhwF7BPU9C9wPPAN8HpSpZRsFwEzgQGC/URwAngDmALcNo2cYAIcDpwI7DWOwReZFYDZwXxe9XQAckBzfu4uBIXifTkDmRmSjAK4Czo8o7JHnauCCnL4IAANu95yiMf3+XC4x5AD8DEwdk3NRtb8AyzcxtwGYP4ZAjTpd5TPAd64TbgJwEXDZsNbGJHcxcHlVdx0A8/utDU7MSt9vB+zTs6NPAQuSzksadJ9UvS+qALYGXmsQ/gOYAXybft8AOAa4cEQgVwB3AR8lPeuX3utUbwO8XvxQBXALIMo6Eti2NT9sDJjydgMWlZ7P0rsi6wBrp0/ffZ5PqfmDGp3vAps2+OHpOLkOQNvqyz8vOTnigofEBbdrC+dgF8o70Lb6/zcAg10oAGwE1G1leRE8+6uF1m90pm+AVTNqPLoLCwBnAdcH7Bq4Hwf4RmHJBXGh+2zghgJA7swpZFNiFpoEfQesnDG0JCYFYNf0RcArs4xCk6BjgTsChmYIwNr+5gzzucC1AYV9sng3HJ1ReJoAdF4QbbQZ8F6f3gV02aLmmpvZAngUOKhF4V/AcsCfAaN9skSC+TEBvAJY2zTRQsCU9V+QicMJRxMtEIABXIw/6hgbS9kJIMqV9IsF8HfGES+4TSbgbJ2J93O7L4AfgBVbHDQn527FceHz9l+lRfmPAvg0VYdtTuRaz3EByJ2ORTr2BrBlxoN9ARuOSZIN05MZg28KIFJG3AScMUnvgRuB0zM25wngUqCphSvkHcpag381IRDTU2fYlkJ1ZZYAbBzchRzZDwt2EhRZVP1YUsxJruy0gGeHAg8F+EZhOQR4MKDga2B6AcDJ8IkBIVmOA+4M8nZlOwG4PSgk38wCgEOjF4KCsgnAInAwHeggW8fqwPhMoMvgeBdgfjm/ezQOLmn3HHrurc1No25tlexNXwVeBt7pCMIhwlbADoAr34UeLvwpA9gfqI60HV8UQy5zcm6YdXygEbkyMnXOoHHU/7g81RtWZ53MlanIPvbDjwBbNCj3nxYXIUJ3A0dFGGt4jNfB7KoKYL0UC9X8uyPwklGfzr//iVXJBuSBoFM6L4iu5H3k2f+kEKyrcbz9vAXLZHyYQqWlgFOAI4ENgQ9THORuzbI+d/Gtrt6nasCqYEBNRdp1gGOLMhngHqG+KFeoVe049jmn+mVblWlaLc/kvwf2TMVfHyC6ALCx8ej8i3Jl8q/AMiUpz6BB5Bhy1LooCuA3YNmmFcsBUK5uUiwQg9pgWglYq+MlpN4IACchTkQaKQJAYVOkl1kfugodOQDeO9k/0aMANHpeelZoQNFFV9sO/ARck55srHU1unkCccQQ8VQVqduBe5Pjb2c9TwxdARR6t09lhReSl5//zKwbNZr4il7cOLontazOqDrRsADKRmyIHH9Yn3ch+w/HNSMNjP8ByJvQwXilCFoAAAAASUVORK5CYII="
							alt="github" style="max-width:90%; max-height:128px;" />
					</div>
				</div>
				<div class="pure-u-16-24">
					<h4>
						<%:GitHub%><br><br><span id="status_github" class="red"><em><%:Collecting data...%></em></span>
					</h4>
				</div>
			</div>
		</div>

	</div>
</fieldset>

<fieldset class="cbi-section">
	<div class="pure-g status">
		<div class="siz">
			<div class="block pure-g">
				<div class="pure-u-16-24">
					<h4>
						<%:Global IP%><br><br><span class="green" id="ip-ipify"><%:Checking...%></span> <span class="green" id="ip-ipify-ipip"></span>
					</h4>
				</div>
			</div>
		</div>

		<div class="siz">
			<div class="block pure-g">
				<div class="pure-u-16-24">
					<h4>
						<%:Domestic IP%><br><br><span id="d-ip" class="green"><%:Checking...%></span><span class="green" id="ipify-ipip"></span>
					</h4>
				</div>
			</div>
		</div>

	</div>
</fieldset>


<fieldset class="cbi-section">
	<table width="100%" cellspacing="10">
		<tr>
			<td width="50%"><span> <%:Clash Client%> </span></td><td id="_clash"><em> <%:Collecting data...%> </em></td>
		</tr>
		<tr>
			<td width="50%"><span><%:Clash Mode%></span></td><td id="_emode"><em><%:Collecting data...%></em></td>
		</tr>
		<tr>
			<td width="50%"><span><%:Clash Config%></span></td><td id="_conf"><em><%:Collecting data...%></em></td>
		</tr>
		<tr>
			<td width="50%"><span><%:Config Type%></span></td><td id="_conf_path"><em><%:Collecting data...%></em></td>
		</tr>
		<tr>
			<td width="50%"><span><%:Clash Dashboard%></span></td><td id="_web"><em><%:Collecting data...%></em></td>
		</tr>
		<tr>
			<td width="50%"><span><%:Yacd Dashboard%></span></td><td id="_webb"><em><%:Collecting data...%></em></td>
		</tr>
	</table>
</fieldset>

<fieldset class="cbi-section">
	<table width="100%" cellspacing="10">
		<tr>
			<td width="50%"><%:Dashboard Host%></td><td id="_ip"><em><%:Collecting data...%></em></td>
		</tr>
		<tr>
			<td width="50%"><%:Dashboard Port%></td><td id="_port"><em><%:Collecting data...%></em></td>
		</tr>
		<tr>
			<td width="50%"><%:Dashboard Secret%></td><td id="_secret"><em><%:Collecting data...%></em></td>
		</tr>
	</table>
</fieldset>



<script type="text/javascript">//<![CDATA[
	let random = parseInt(Math.random() * 100000000);
	let IP = {
		get: (url, type) =>
			fetch(url, { method: 'GET' }).then((resp) => {
				if (type === 'text')
					return Promise.all([resp.ok, resp.status, resp.text(), resp.headers]);
				else {
					return Promise.all([resp.ok, resp.status, resp.json(), resp.headers]);
				}
			}).then(([ok, status, data, headers]) => {
				if (ok) {
					let json = {
						ok,
						status,
						data,
						headers
					}
					return json;
				} else {
					throw new Error(JSON.stringify(json.error));
				}
			}).catch(error => {
				throw error;
			}),

		parseIPIpip: (ip, elID) => {
			IP.get(`https://geoip.gbxcloud.com/?geoip=${ip}`, 'text')
				.then(resp => {
					document.getElementById(elID).innerHTML = resp.data;
				})
		},

		getIpipnetIP: () => {
			IP.get(`http://myip.ipip.net/?z=${random}`, 'text')
				.then((resp) => {
					let data = resp.data.replace('当前 IP：', '').split(' 来自于：');
					//var u= data[0].indexOf("来自于：")
					document.getElementById('d-ip').innerHTML = `${data[0]} - `
					return `${data[0]}`
				})
				.then(ip => {
					IP.parseIPIpip(ip, 'ipify-ipip');
				})
		},

		getIpifyIP: () => {
			IP.get(`https://ip4.seeip.org/json?z=${random}`, 'json')
				.then(resp => {
					document.getElementById('ip-ipify').innerHTML = `${resp.data.ip} - `;
					return resp.data.ip
				})
				.then(ip => {
					IP.parseIPIpip(ip, 'ip-ipify-ipip');
				})
		}
	}

	var HTTP = {
		checker: (domain, cbElID) => {
			let img = new Image;
			let timeout = setTimeout(() => {
				img.onerror = img.onload = null;
				img = null;
				document.getElementById(cbElID).innerHTML = '<b class="red"><%:NO ACCESS%></b>'
			}, 3000);
			img.onerror = () => {
				clearTimeout(timeout);
				document.getElementById(cbElID).innerHTML = '<b class="red"><%:TIMEOUT%></b>'
			}
			img.onload = () => {
				clearTimeout(timeout);
				document.getElementById(cbElID).innerHTML = '<b class="green"><%:NORMAL%></b>'
			}
			img.src = `https://${domain}/favicon.ico?${+(new Date)}`
		}
	}


	var dnew = document.getElementById('_downloadnew');
	var web = document.getElementById('_web');
	var webb = document.getElementById('_webb');
	var clash = document.getElementById('_clash');
	var ip = document.getElementById('_ip');
	var port = document.getElementById('_port');
	var secret = document.getElementById('_secret');
	var emode = document.getElementById('_emode');
	var logo = document.getElementById('_logo');
	var conf = document.getElementById('_conf');
	var conf_path = document.getElementById('_conf_path');


	IP.getIpifyIP();
	IP.getIpipnetIP();
	HTTP.checker('www.baidu.com', 'status_baidu');
	HTTP.checker('www.google.com', 'status_google');
	HTTP.checker('www.youtube.com', 'status_youtube');
	HTTP.checker('github.com', 'status_github');
	XHR.poll(3, '<%=luci.dispatcher.build_url("admin", "services", "clash", "status")%>', null, function (x, status) {
		if (x && x.status == 200) {
			web.innerHTML = status.clash ? '<a type="button" class="btn" style="background-color:black;padding: 5px;"  href="http://' + window.location.hostname + ':' + status.dash_port + '/ui" target="_blank"><b><font color="green"><%:DASHBOARD%></font></b></a>' : '<b><font color="red"><%:NOT RUNNING%></font></b>';
			webb.innerHTML = status.clash ? '<a type="button" class="btn" style="background-color:black;padding: 5px;"  href="http://' + window.location.hostname + status.uhttp_port + '/luci-static/yacd?hostname=' + status.localip + '&port=' + status.dash_port + '&secret=' + status.dash_pass + '" target="_blank"><b><font color="green"><%:DASHBOARD%></font></b></a>' : '<b><font color="red"><%:NOT RUNNING%></font></b>';
			clash.innerHTML = status.clash ? '<b><font color="green"><%:RUNNING%></font> </b>' : '<b><font color="red"><%:NOT RUNNING%></font></b>';
			ip.innerHTML = status.localip ? '<b><font color="green">' + status.localip + '</font> </b>' : '<em><b><font color="red"><%:NOT SET%></font></b></em>';
			port.innerHTML = status.dash_port ? '<b><font color="green">' + status.dash_port + '</font> </b>' : '<em><b><font color="red"><%:NOT SET%></font></b></em>';
			secret.innerHTML = status.dash_pass ? '<b><font color="green">' + status.dash_pass + '</font> </b>' : '<em><b><font color="red"><%:NOT SET%></font></b></em>';
			emode.innerHTML = status.clash ? '<b><font color="green" style="text-transform: uppercase;">' + status.e_mode + '</font> </b>' : '<b><font color="red"><%:NOT RUNNING%></font></b>';
			if (status.typeconf != 0 || status.typeconf != '') {
				conf.innerHTML = status.typeconf ? '<b><input type="button" class="btn" style="background-color:black;padding: 5px;font-color:green;color:green;font-weight:bold" value="<%:VIEW CONFIG%>" onclick="return view(this)" /></b>' : '<b><font color="red"><%:NOT RUNNING%></font></b>';
			}
			if (status.typeconf == 1) {
				conf_path.innerHTML = status.clash ? '<b><font color="green"><%:SUBSCRIBE%> </font></b>' : '<b><font color="red"><%:NOT RUNNING%></font></b>';
			}
			if (status.typeconf == 2) {
				conf_path.innerHTML = status.clash ? '<b><font color="green"><%:UPLOAD%></font></b>' : '<b><font color="red"><%:NOT RUNNING%></font></b>';
			}
			if (status.typeconf == 3) {
				conf_path.innerHTML = status.clash ? '<b><font color="green"><%:CUSTOM%></font></b>' : '<b><font color="red"><%:NOT RUNNING%></font></b>';
			}
			if (status.typeconf == 0 || status.typeconf == '') {
				conf_path.innerHTML = status.typeconf ? '<b><font color="red"><%:NOT SELECTED%></font></b>' : '<b><font color="red"><%:NOT RUNNING%></font></b>';
			}
			if (status.new_version > status.current_version) {
				dnew.innerHTML = '<center><br><a href="https://github.com/dylanchu/luci-app-clash/releases" class="btn" style="height:20px;font-size:15px;margin-top:-20px;background-color:#568fa1;color:#ffffff;" target="_blank"><%:Download Update%></a></center>';
			}

			IP.getIpifyIP();
			IP.getIpipnetIP();
			if (x && x.status == 200) {
				HTTP.checker('www.baidu.com', 'status_baidu');
				HTTP.checker('www.google.com', 'status_google');
				HTTP.checker('www.youtube.com', 'status_youtube');
				HTTP.checker('github.com', 'status_github');
			}
		}
	});


	var rtlog = document.getElementById('_realtimelog');
	XHR.poll(1, '<%=luci.dispatcher.build_url("admin", "services", "clash", "readlog")%>', status.readlog, function (x, status) {
		if (x && x.status == 200) {
			if (status.readlog != "\n" || status.readlog != "") {
				rtlog.innerHTML = '<b>' + status.readlog + '</b>';
			}
		}
	});

	XHR.get('<%=luci.dispatcher.build_url("admin", "services", "clash", "check_status")%>', null, function (x, status) { });

//]]></script>

<style>
	.modals-bg {
		position: fixed;
		z-index: 90;
		width: 100%;
		height: 100%;
		left: 0;
		top: 0;
		background: rgba(0, 0, 0, 0.8);
		display: none;
	}

	.modals {
		position: fixed;
		z-index: 100;
		width: 70%;
		height: 650px;
		background: #FFFFFF;
		left: 20%;
		top: 15%;
		color: #fff;
		border-radius: 10px;
		padding: 20px;

		box-sizing: border-box;
		-moz-box-sizing: border-box;
		/* Firefox */
		-webkit-box-sizing: border-box;
		/* Safari */
	}

	.modals h2 {}

	.modals h3 {
		font-size: 14px;
		color: red;
		background: transparent;
		margin: 0;
		padding: 0;
	}

	@media screen and (max-width: 1024px) {
		.modals {
			position: fixed;
			z-index: 100;
			width: 80%;
			height: 550px;
			background: #FFFFFF;
			left: 10%;
			top: 15%;
			color: #fff;
			border-radius: 10px;
			padding: 20px;
		}
	}

	@media screen and (max-width: 700px) {
		.modals-bg {
			position: fixed;
			z-index: 100000;

		}

		.modals {
			width: 100%;
			height: 100%;
			left: 0;
			top: 0;
		}
	}

	.close {
		color: #aaaaaa;
		float: right;
		font-size: 28px;
		font-weight: bold;
	}

	.close:hover,
	.close:focus {
		color: #000;
		text-decoration: none;
		cursor: pointer;
	}
</style>
<div class="modals-bg">

	<div class="modals">
		<span><input type="button" class="cbi-button cbi-button-apply" value="<%:Download%>" style=" display:inline;"
				onclick=" return download_conf()" /></span><br /><span class="close">&times;</span>
		<br />
		<h3 style="margin-left:0;">
			<%:If config does not show refresh page%>
		</h3><br />
		<span><textarea id="cbid.logview.1.conf"
				style="width:100%;height:80%; font-family:'Lucida Console'; font-size:12px;padding-left:3px;padding-right:22px;"
				readonly="readonly" wrap="off"
				rows="25"><%=pcdata(nixio.fs.readfile("/etc/clash/config.yaml"))%></textarea></span>
	</div>
</div>
<script>
	var btn = document.getElementById("myBtn");
	var span = document.getElementsByClassName("close")[0];
	var cfg = document.getElementsByClassName("modals-bg")[0];
	span.onclick = function () {
		cfg.style.display = "none";
	}
	function view(btn) {
		cfg.style.display = "inline";
	}

	function createAndDownloadFile(fileName, content) {
		var aTag = document.createElement('a');
		var blob = new Blob([content]);
		aTag.download = fileName;
		aTag.href = URL.createObjectURL(blob);
		aTag.click();
		URL.revokeObjectURL(blob);
	}
	function download_conf() {
		var lv = document.getElementById('cbid.logview.1.conf');
		var dt = new Date();
		createAndDownloadFile("config.yaml", lv.innerHTML)
		return
	}
</script>